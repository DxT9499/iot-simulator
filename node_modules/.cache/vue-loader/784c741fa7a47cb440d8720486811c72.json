{"remainingRequest":"/home/dxt/code/iot-simulator/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/dxt/code/iot-simulator/src/components/DeviceOnMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/dxt/code/iot-simulator/src/components/DeviceOnMap.vue","mtime":1622128423528},{"path":"/home/dxt/code/iot-simulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dxt/code/iot-simulator/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/dxt/code/iot-simulator/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/dxt/code/iot-simulator/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7SFRUUH0gZnJvbSAnLi9odHRwLWNvbW1vbicKaW1wb3J0IE1pbmlNZW51IGZyb20gJy4vTWluaU1lbnUudnVlJwpleHBvcnQgZGVmYXVsdCB7CgluYW1lOiAiRHJhZ2dhYmxlRGl2IiwKCXByb3BzOiB7CgkJcGljX3VybDogU3RyaW5nLAoJCXN0YXR1czogQm9vbGVhbiwKCQlwb3NpdGlvblg6IFN0cmluZywKCQlwb3NpdGlvblk6IFN0cmluZywKCX0sCglkYXRhKCkgewoJCXJldHVybiB7CgkJCWlzU2hvdzogZmFsc2UsCgkJCWlzVG9nZ2xlU2hvdzogZmFsc2UsCgkJCWlzVG9nZ2xlZDogZmFsc2UsCgkJCW5hbWU6ICIiLAoJCQlsYWJlbDogIiIsCgkJCXR5cGU6ICIiLAoJCQl0YWc6ICIiLAoJCQlwb3NpdGlvbnM6IHsKCQkJCWNsaWVudFg6IHVuZGVmaW5lZCwKCQkJCWNsaWVudFk6IHVuZGVmaW5lZCwKCQkJCW1vdmVtZW50WDogMCwKCQkJCW1vdmVtZW50WTogMCwKCQkJfSwKCQl9OwoJfSwKCWNvbXBvbmVudHM6IHsKCQlNaW5pTWVudSwKCX0sCgljb21wdXRlZDogewoJCXN0eWxlKCkgewoJCQlyZXR1cm4gewoJCQkJbGVmdDogdGhpcy5wb3NpdGlvblgsCgkJCQl0b3A6IHRoaXMucG9zaXRpb25ZLAoJCQl9OwoJCX0sCgl9LAoJbWV0aG9kczogewoJCWRyYWdNb3VzZURvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCS8vIGdldCB0aGUgbW91c2UgY3Vyc29yIHBvc2l0aW9uIGF0IHN0YXJ0dXA6CgkJCXRoaXMucG9zaXRpb25zLmNsaWVudFggPSBldmVudC5jbGllbnRYOwoJCQl0aGlzLnBvc2l0aW9ucy5jbGllbnRZID0gZXZlbnQuY2xpZW50WTsKCQkJZG9jdW1lbnQub25tb3VzZW1vdmUgPSB0aGlzLmVsZW1lbnREcmFnOwoJCQlkb2N1bWVudC5vbm1vdXNldXAgPSB0aGlzLmNsb3NlRHJhZ0VsZW1lbnQ7CgkJfSwKCQllbGVtZW50RHJhZzogZnVuY3Rpb24oZXZlbnQpIHsKCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJdGhpcy5wb3NpdGlvbnMubW92ZW1lbnRYID0gdGhpcy5wb3NpdGlvbnMuY2xpZW50WCAtIGV2ZW50LmNsaWVudFg7CgkJCXRoaXMucG9zaXRpb25zLm1vdmVtZW50WSA9IHRoaXMucG9zaXRpb25zLmNsaWVudFkgLSBldmVudC5jbGllbnRZOwoJCQl0aGlzLnBvc2l0aW9ucy5jbGllbnRYID0gZXZlbnQuY2xpZW50WDsKCQkJdGhpcy5wb3NpdGlvbnMuY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7CgkJCS8vIHNldCB0aGUgZWxlbWVudCdzIG5ldyBwb3NpdGlvbjoKCQkJdGhpcy4kcmVmcy5kcmFnZ2FibGVDb250YWluZXIuc3R5bGUudG9wID0KCQkJCXRoaXMuJHJlZnMuZHJhZ2dhYmxlQ29udGFpbmVyLm9mZnNldFRvcCAtCgkJCQl0aGlzLnBvc2l0aW9ucy5tb3ZlbWVudFkgKwoJCQkJInB4IjsKCQkJdGhpcy4kcmVmcy5kcmFnZ2FibGVDb250YWluZXIuc3R5bGUubGVmdCA9CgkJCQl0aGlzLiRyZWZzLmRyYWdnYWJsZUNvbnRhaW5lci5vZmZzZXRMZWZ0IC0KCQkJCXRoaXMucG9zaXRpb25zLm1vdmVtZW50WCArCgkJCQkicHgiOwoJCX0sCgkJY2xvc2VEcmFnRWxlbWVudCgpIHsKCQkJZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDsKCQkJZG9jdW1lbnQub25tb3VzZW1vdmUgPSBudWxsOwoJCX0sCgkJaGFuZGxlRXZlbnREZWxldGU6IGZ1bmN0aW9uKCkgewoJCQl0aGlzLiRlbWl0KCJyZW1vdmUiKTsKCQl9LAoJCWhhbmRsZUV2ZW50U3VibWl0OiBmdW5jdGlvbihuYW1lLCBsYWJlbCwgdHlwZSwgdGFnKSB7CgkJCXRoaXMubmFtZSA9IG5hbWUKCQkJdGhpcy5sYWJlbCA9IGxhYmVsCgkJCXRoaXMudHlwZSA9IHR5cGUKCQkJdGhpcy50YWcgPSB0YWcKCQkJaWYodHlwZSA9PSAnU3dpdGNoJykgdGhpcy5pc1RvZ2dsZVNob3cgPSB0cnVlCgkJCXRoaXMuZmV0Y2hEYXRhKCkKCQl9LAoJCWFzeW5jIGZldGNoRGF0YSgpIHsKCQkJY29uc3QgdXJsID0gYGl0ZW1zL2AgKyB0aGlzLm5hbWUgKyBgL3N0YXRlYAoJCQl3aGlsZSAodXJsICE9ICcnKXsKCQkJCUhUVFAuZ2V0KHVybCx7aGVhZGVyczp7J0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJ319KS50aGVuKHJlc3BvbnNlPT57CgkJCQkJY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSkKCQkJCX0pCgkJCX0KCgkJfQoJfSwKfTsK"},{"version":3,"sources":["DeviceOnMap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"DeviceOnMap.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\t<div ref=\"draggableContainer\" id=\"draggable-device\" :style=\"style\">\n\t\t<div\n\t\t\tid=\"draggable-device-header\"\n\t\t\t@mousedown=\"dragMouseDown\"\n\t\t\tv-on:dblclick=\"isShow = !isShow\"\n\t\t>\n\t\t\t<img :src=\"require(`../assets/iot-devices/${pic_url}`)\" />\n\t\t\t<span class=\"name\">{{ name }}</span>\n\t\t</div>\n\t\t<MiniMenu\n\t\t\tv-if=\"isShow\"\n\t\t\tv-bind:name.sync=\"name\"\n\t\t\tv-bind:label.sync=\"label\"\n\t\t\tv-bind:type.sync=\"type\"\n\t\t\tv-bind:tag.sync=\"tag\"\n\t\t\t@deviceInfor=\"handleEventSubmit\"\n\t\t\t@deleteDevice=\"handleEventDelete\"\n\t\t></MiniMenu>\n\t\t<button class=\"button-toggle\" :class= \"{toggled: isToggled}\" v-if=\"isToggleShow\" @click= \"isToggled = !isToggled\">{{isToggled ? 'ON' : 'OFF'}}</button>\n\t</div>\n</template>\n<script>\nimport {HTTP} from './http-common'\nimport MiniMenu from './MiniMenu.vue'\nexport default {\n\tname: \"DraggableDiv\",\n\tprops: {\n\t\tpic_url: String,\n\t\tstatus: Boolean,\n\t\tpositionX: String,\n\t\tpositionY: String,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisShow: false,\n\t\t\tisToggleShow: false,\n\t\t\tisToggled: false,\n\t\t\tname: \"\",\n\t\t\tlabel: \"\",\n\t\t\ttype: \"\",\n\t\t\ttag: \"\",\n\t\t\tpositions: {\n\t\t\t\tclientX: undefined,\n\t\t\t\tclientY: undefined,\n\t\t\t\tmovementX: 0,\n\t\t\t\tmovementY: 0,\n\t\t\t},\n\t\t};\n\t},\n\tcomponents: {\n\t\tMiniMenu,\n\t},\n\tcomputed: {\n\t\tstyle() {\n\t\t\treturn {\n\t\t\t\tleft: this.positionX,\n\t\t\t\ttop: this.positionY,\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\tdragMouseDown: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\t// get the mouse cursor position at startup:\n\t\t\tthis.positions.clientX = event.clientX;\n\t\t\tthis.positions.clientY = event.clientY;\n\t\t\tdocument.onmousemove = this.elementDrag;\n\t\t\tdocument.onmouseup = this.closeDragElement;\n\t\t},\n\t\telementDrag: function(event) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.positions.movementX = this.positions.clientX - event.clientX;\n\t\t\tthis.positions.movementY = this.positions.clientY - event.clientY;\n\t\t\tthis.positions.clientX = event.clientX;\n\t\t\tthis.positions.clientY = event.clientY;\n\t\t\t// set the element's new position:\n\t\t\tthis.$refs.draggableContainer.style.top =\n\t\t\t\tthis.$refs.draggableContainer.offsetTop -\n\t\t\t\tthis.positions.movementY +\n\t\t\t\t\"px\";\n\t\t\tthis.$refs.draggableContainer.style.left =\n\t\t\t\tthis.$refs.draggableContainer.offsetLeft -\n\t\t\t\tthis.positions.movementX +\n\t\t\t\t\"px\";\n\t\t},\n\t\tcloseDragElement() {\n\t\t\tdocument.onmouseup = null;\n\t\t\tdocument.onmousemove = null;\n\t\t},\n\t\thandleEventDelete: function() {\n\t\t\tthis.$emit(\"remove\");\n\t\t},\n\t\thandleEventSubmit: function(name, label, type, tag) {\n\t\t\tthis.name = name\n\t\t\tthis.label = label\n\t\t\tthis.type = type\n\t\t\tthis.tag = tag\n\t\t\tif(type == 'Switch') this.isToggleShow = true\n\t\t\tthis.fetchData()\n\t\t},\n\t\tasync fetchData() {\n\t\t\tconst url = `items/` + this.name + `/state`\n\t\t\twhile (url != ''){\n\t\t\t\tHTTP.get(url,{headers:{'Content-Type': 'text/plain'}}).then(response=>{\n\t\t\t\t\tconsole.log(response.data)\n\t\t\t\t})\n\t\t\t}\n\n\t\t}\n\t},\n};\n</script>\n\n<style>\n#draggable-device {\n\tposition: absolute;\n\tz-index: 9;\n\twidth: 100px;\n\theight: 100px;\n}\n#draggable-device-header {\n\tz-index: 10;\n}\n#draggable-device #draggable-device-header img {\n\tposition: relative;\n\tdisplay: block;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\tmargin-top: 10px;\n\tmargin-bottom: 10px;\n\twidth: 50px;\n\theight: 50px;\n}\n#draggable-device #draggable-device-header .name {\n\tmargin-top: 2px;\n\tdisplay: block;\n\ttext-align: center;\n\tcolor: black;\n}\n.button-toggle {\n\tposition: absolute;\n\tborder: none;\n\tcolor: white;\n\theight: 25px;\n\twidth: 50px;\n\tborder-radius: 5px;\n\tmargin-top: -75px;\n\tmargin-left: 50px;\n\tbackground-color: #C32110;\n}\n.button-toggle.toggled {\n\tbackground-color: #3A992B;\n}\n\n\n</style>\n"]}]}